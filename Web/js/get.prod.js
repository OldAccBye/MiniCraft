"use strict";var express=require("express"),router=express.Router(),players=require("../models/players"),playersFFA=require("../models/ffa");router.get("/",function(e,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"index",e.t2);case 6:case"end":return e.stop()}})}),router.get("/team",function(e,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"team",e.t2);case 6:case"end":return e.stop()}})}),router.get("/top",function(e,t){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(playersFFA.find().sort({kills:-1}).limit(1));case 2:return r=e.sent,e.next=5,regeneratorRuntime.awrap(players.findOne({UUID:r[0].UUID}));case 5:if(n=e.sent,null===r||null===n)return e.t0=t,e.next=10,regeneratorRuntime.awrap(players.countDocuments());e.next=14;break;case 10:return e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"topPlayers",e.t2),e.abrupt("return");case 14:return e.t3=t,e.next=17,regeneratorRuntime.awrap(players.countDocuments());case 17:e.t4=e.sent,e.t5={uuid:r[0].UUID,username:n.username,kills:r[0].kills,deaths:r[0].deaths},e.t6={userCount:e.t4,ffa:e.t5},e.t3.render.call(e.t3,"topPlayers",e.t6);case 21:case"end":return e.stop()}})}),router.get("/donate",function(e,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"spenden",e.t2);case 6:case"end":return e.stop()}})}),router.get("/help",function(e,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"help",e.t2);case 6:case"end":return e.stop()}})}),router.get("/p/:username",function(t,r){var n,a,u,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.username,e.next=3,regeneratorRuntime.awrap(players.findOne({username:n}));case 3:if(null===(a=e.sent))return e.t0=r,e.next=8,regeneratorRuntime.awrap(players.countDocuments());e.next=11;break;case 8:return e.t1=e.sent,e.t2={userCount:e.t1,error:"notFound"},e.abrupt("return",e.t0.render.call(e.t0,"profil",e.t2));case 11:return e.next=13,regeneratorRuntime.awrap(playersFFA.findOne({UUID:a.UUID}));case 13:if(null===(u=e.sent))return e.t3=r,e.next=18,regeneratorRuntime.awrap(players.countDocuments());e.next=22;break;case 18:return e.t4=e.sent,e.t5={uuid:a.UUID,username:n,banned:a.banned,group:a.group},e.t6={userCount:e.t4,profil:e.t5},e.abrupt("return",e.t3.render.call(e.t3,"profil",e.t6));case 22:return s={kills:u.kills,deaths:u.deaths},o={uuid:a.UUID,username:n,banned:a.banned,group:a.group,ffa:s},e.t7=r,e.next=27,regeneratorRuntime.awrap(players.countDocuments());case 27:e.t8=e.sent,e.t9=o,e.t10={userCount:e.t8,profil:e.t9},e.t7.render.call(e.t7,"profil",e.t10);case 31:case"end":return e.stop()}})}),module.exports=router;