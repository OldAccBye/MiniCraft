"use strict";var express=require("express"),router=express.Router(),players=require("../models/players"),playersFFA=require("../models/ffa"),playersGTC=require("../models/gtc");router.get("/",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"index",e.t2);case 6:case"end":return e.stop()}})}),router.get("/team",function(e,r){var t,n,a,s,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(players.find({group:"builder"}));case 2:return t=e.sent,e.next=5,regeneratorRuntime.awrap(players.find({group:"supporter"}));case 5:return n=e.sent,e.next=8,regeneratorRuntime.awrap(players.find({group:"moderator"}));case 8:return a=e.sent,e.next=11,regeneratorRuntime.awrap(players.find({group:"admin"}));case 11:return s=e.sent,e.next=14,regeneratorRuntime.awrap(players.find({group:"owner"}));case 14:return u=e.sent,e.t0=r,e.next=18,regeneratorRuntime.awrap(players.countDocuments());case 18:e.t1=e.sent,e.t2=t,e.t3=n,e.t4=a,e.t5=s,e.t6=u,e.t7={userCount:e.t1,b:e.t2,s:e.t3,m:e.t4,a:e.t5,o:e.t6},e.t0.render.call(e.t0,"team",e.t7);case 26:case"end":return e.stop()}})}),router.get("/top",function(e,r){var t,n,a,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t={uuid:"fc6d4376-a67f-45e8-a46a-96a3c375",username:"none",kills:0,deaths:0},n={uuid:"fc6d4376-a67f-45e8-a46a-96a3c375",username:"none",won:0},e.next=3,regeneratorRuntime.awrap(playersFFA.find().sort({kills:-1,deaths:1}).limit(1));case 3:return a=e.sent,e.next=6,regeneratorRuntime.awrap(players.findOne({UUID:a[0].UUID}));case 6:return s=e.sent,null!==a&&null!==s&&(t={uuid:a[0].UUID,username:s.username,kills:a[0].kills,deaths:a[0].deaths}),e.next=10,regeneratorRuntime.awrap(playersGTC.find().sort({won:-1}).limit(1));case 10:return a=e.sent,e.next=13,regeneratorRuntime.awrap(players.findOne({UUID:a[0].UUID}));case 13:return s=e.sent,null!==a&&null!==s&&(n={uuid:a[0].UUID,username:s.username,won:a[0].won}),e.t0=r,e.next=18,regeneratorRuntime.awrap(players.countDocuments());case 18:e.t1=e.sent,e.t2=t,e.t3=n,e.t4={userCount:e.t1,ffa:e.t2,gtc:e.t3},e.t0.render.call(e.t0,"topPlayers",e.t4);case 23:case"end":return e.stop()}})}),router.get("/donate",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"spenden",e.t2);case 6:case"end":return e.stop()}})}),router.get("/help",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,regeneratorRuntime.awrap(players.countDocuments());case 3:e.t1=e.sent,e.t2={userCount:e.t1},e.t0.render.call(e.t0,"help",e.t2);case 6:case"end":return e.stop()}})}),router.get("/p/:username",function(r,t){var n,a,s,u,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.username,e.next=3,regeneratorRuntime.awrap(players.findOne({username:n}));case 3:if(null===(a=e.sent))return e.t0=t,e.next=8,regeneratorRuntime.awrap(players.countDocuments());e.next=11;break;case 8:return e.t1=e.sent,e.t2={userCount:e.t1,error:"notFound"},e.abrupt("return",e.t0.render.call(e.t0,"profil",e.t2));case 11:return s={kills:0,deaths:0},u={won:0},e.next=14,regeneratorRuntime.awrap(playersFFA.findOne({UUID:a.UUID}));case 14:return null!==(o=e.sent)&&(s={kills:o.kills,deaths:o.deaths}),e.next=18,regeneratorRuntime.awrap(playersGTC.findOne({UUID:a.UUID}));case 18:return null!==(o=e.sent)&&(u={won:o.won}),c={uuid:a.UUID,username:n,banned:a.banned,group:a.group,ffa:s,gtc:u},e.t3=t,e.next=24,regeneratorRuntime.awrap(players.countDocuments());case 24:e.t4=e.sent,e.t5=c,e.t6={userCount:e.t4,profil:e.t5},e.t3.render.call(e.t3,"profil",e.t6);case 28:case"end":return e.stop()}})}),module.exports=router;