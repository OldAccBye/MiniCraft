<%- include('header'); %>

    <main class="my-3">
        <% if (typeof error !== 'undefined' || typeof profile === 'undefined') { %>
        <div class="container">
            <div class="alert alert-danger text-center" role="alert">
                <h4 class="alert-heading">Hoppla!</h4>
                <p class="mb-0">
                    Dieser Spieler konnte in unserer Datenbank nicht gefunden werden :/
                </p>
            </div>
        </div>
        <% } else { %>
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="shadow-sm p-3 bg-white rounded text-center status-border:<%= profile.onlineStatus %>">
                        <img style="max-width: 100%;" src="https://crafatar.com/renders/body/<%= profile.uuid %>">
                    </div>
                    <div class="my-3 text-center">
                        <%- typeof profile.banned !== 'undefined' ? profile.banned === false ? '<span class="badge:green">NICHT GESPERRT</span>' : '<span class="badge:red">GESPERRT</span>' : 'null' %>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="shadow-sm p-3 bg-white rounded">
                        <div class="d-flex">
                            <img src="https://crafatar.com/avatars/<%= profile.uuid %>" width="48" alt=".">
                            <div class="px-3">
                                <span class="text-decoration-none text-light badge bg:primary"><%= profile.group %></span>
                                <div><small class="text-muted"><%= profile.username %></small></div>
                            </div>
                        </div>
                        <div class="mt-2">
                            <small class="fw-bold text-muted">Player UUID</small>
                            <p class="mb-0">
                                <%= profile.uuid %>
                            </p>
                        </div>
                        <div class="mt-2">
                            <small class="fw-bold text-muted">Registriert seit</small>
                            <p class="mb-0">
                                <% let date = new Date(profile.registrationTimestamp); %>
                                <%= date.getDate() %>.<%= date.getMonth() + 1 %>.<%= date.getFullYear() %> - <%= date.getHours() %>:<%= date.getMinutes() %>:<%= date.getSeconds() %>
                            </p>
                        </div>
                        <div class="mt-2">
                            <small class="fw-bold text-muted">Namensverlauf</small>
                            <div class="overflow-auto bg-dark p-2" style="max-height: 200px;">
                                <% profile.lastNameList.slice().reverse().forEach((item) => {
                                    if (item.changedToAt) { %>
                                <figure class="lh-1">
                                    <blockquote class="blockquote mb-0">
                                        <p class="text-light">
                                            <%= item.name %>
                                        </p>
                                    </blockquote>
                                    <small class="text-muted">
                                        <%
                                            date = new Date(item.changedToAt);
                                        %>
                                        <%= date.getDate() %>.<%= date.getMonth() + 1 %>.<%= date.getFullYear() %> - <%= date.getHours() %>:<%= date.getMinutes() %>:<%= date.getSeconds() %>
                                    </small>
                                </figure>
                                   <% } else { %>
                                <figure class="mb-0 lh-1">
                                    <blockquote class="blockquote mb-0">
                                        <p class="text-light">
                                            <%= item.name %>
                                        </p>
                                    </blockquote>
                                </figure>
                                <% }}); %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <h3 class="label mt-2">Minigames</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
                <div class="col">
                    <div class="card bg-dark text-white">
                        <img src="/assets/img/mgffa.png" class="card-img" alt="...">
                        <div class="card-img-overlay p-0">
                            <h5 class="card-title text-center p-1" style="background-color: #000000a3;">Free-For-All</h5>
                        </div>
                    </div>
                    <div class="mt-2 shadow-sm p-3 bg-white rounded text-center">
                        <div class="d-flex">
                            <div class="fw-bold">Kills</div>
                            <div class="ms-auto"><span class="badge:green text:shadow-sm fw-bold"><%= profile.ffa.kills %></span></div>
                        </div>
                        <div class="d-flex mt-2">
                            <div class="fw-bold">Tode</div>
                            <div class="ms-auto"><span class="badge:green text:shadow-sm fw-bold"><%= profile.ffa.deaths %></span></div>
                        </div>
                    </div>
                </div>
                <div class="col mt-3 mt-md-0">
                    <div class="card bg-dark text-white">
                        <img src="/assets/img/mggtc.png" class="card-img" alt="...">
                        <div class="card-img-overlay p-0">
                            <h5 class="card-title text-center p-1" style="background-color: #000000a3;">Get-The-Chicken</h5>
                        </div>
                    </div>
                    <div class="mt-2 shadow-sm p-3 bg-white rounded text-center">
                        <div class="d-flex">
                            <div class="fw-bold">Gewonnen</div>
                            <div class="ms-auto"><span class="badge:green text:shadow-sm fw-bold"><%= profile.gtc.won %>x</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
    </main>

<%- include('footer'); %>